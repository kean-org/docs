<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Nuke  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="Nuke  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">Nuke Docs</a> (70% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">Nuke Reference</a>
        <img id="carat" src="img/carat.png" />
        Nuke  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/DataCache.html">DataCache</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DataLoader.html">DataLoader</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DataLoader/Error.html">– Error</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ImageCache.html">ImageCache</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ImageDecoderRegistry.html">ImageDecoderRegistry</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ImagePipeline.html">ImagePipeline</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ImagePipeline/Configuration.html">– Configuration</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ImagePipeline/Error.html">– Error</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ImagePipeline/DataCacheItem.html">– DataCacheItem</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ImagePreheater.html">ImagePreheater</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ImagePreheater/Destination.html">– Destination</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ImageResponse.html">ImageResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ImageTask.html">ImageTask</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/DataTaskEvent.html">DataTaskEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageDecoders.html">ImageDecoders</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageDecoders/Default.html">– Default</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageDecoders/Empty.html">– Empty</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageEncoders.html">ImageEncoders</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageEncoders/Default.html">– Default</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageEncoders/ImageIO.html">– ImageIO</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageProcessingOptions.html">ImageProcessingOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageProcessingOptions/Unit.html">– Unit</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageProcessingOptions/Border.html">– Border</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageProcessors.html">ImageProcessors</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageProcessors/Resize.html">– Resize</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageProcessors/Composition.html">– Composition</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageProcessors/Anonymous.html">– Anonymous</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ImageTaskEvent.html">ImageTaskEvent</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/CGFloat.html">CGFloat</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/CGImage.html">CGImage</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/CGSize.html">CGSize</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/ImageProcessors.html">ImageProcessors</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/ImageProcessors/Circle.html">– Circle</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/ImageProcessors/RoundedCorners.html">– RoundedCorners</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/ImageProcessors/CoreImageFilter.html">– CoreImageFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/ImageProcessors/GaussianBlur.html">– GaussianBlur</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/NSImage.html">NSImage</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/NSImageView.html">NSImageView</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/NSLock.html">NSLock</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/PlatformImage.html">PlatformImage</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/String.html">String</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UIImage.html">UIImage</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UIImageView.html">UIImageView</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions.html#/c:objc(cs)NSURLSessionTask">URLSessionTask</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/WKInterfaceImage.html">WKInterfaceImage</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Nuke13cancelRequest3foryAA0A16_ImageDisplaying_So6NSViewCXc_tF">cancelRequest(for:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Nuke9loadImage4with7options4into8progress10completionAA0C4TaskCSg10Foundation3URLV_AA0C14LoadingOptionsVAA0a1_C10Displaying_So6NSViewCXcyAA0C8ResponseCSg_s5Int64VAWtcSgys6ResultOyAtA0C8PipelineC5ErrorOGcSgtF">loadImage(with:options:into:progress:completion:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Nuke9loadImage4with7options4into8progress10completionAA0C4TaskCSgAA0C7RequestV_AA0C14LoadingOptionsVAA0a1_C10Displaying_So6NSViewCXcyAA0C8ResponseCSg_s5Int64VAVtcSgys6ResultOyAsA0C8PipelineC5ErrorOGcSgtF">loadImage(with:options:into:progress:completion:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/Cancellable.html">Cancellable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DataCaching.html">DataCaching</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DataLoaderObserving.html">DataLoaderObserving</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DataLoading.html">DataLoading</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ImageCaching.html">ImageCaching</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ImageDecoderRegistering.html">ImageDecoderRegistering</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ImageDecoding.html">ImageDecoding</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ImageEncoding.html">ImageEncoding</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ImagePipelineObserving.html">ImagePipelineObserving</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ImageProcessing.html">ImageProcessing</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Nuke_ImageDisplaying.html">Nuke_ImageDisplaying</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/ImageContainer.html">ImageContainer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageDecodingContext.html">ImageDecodingContext</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageEncodingContext.html">ImageEncodingContext</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageLoadingOptions.html">ImageLoadingOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageLoadingOptions/ContentModes.html">– ContentModes</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageLoadingOptions/Transition.html">– Transition</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageLoadingOptions/Transition.html">– Transition</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageProcessingContext.html">ImageProcessingContext</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageRequest.html">ImageRequest</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageRequest/Priority.html">– Priority</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageRequest.html#/s:4Nuke12ImageRequestV8CacheKeyV">– CacheKey</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageRequestOptions.html">ImageRequestOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageRequestOptions/MemoryCacheOptions.html">– MemoryCacheOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageType.html">ImageType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:4Nuke5Imagea">Image</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:4Nuke12ImageDecodera">ImageDecoder</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/ImageDisplayingView">ImageDisplayingView</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:4Nuke19ImageDisplayingViewa">ImageDisplayingView</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:4Nuke12ImageEncodera">ImageEncoder</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:4Nuke14ImageProcessora">ImageProcessor</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/PlatformImage">PlatformImage</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:4Nuke13PlatformImagea">PlatformImage</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p><br/></p>

<p align="left"><img src="https://cloud.githubusercontent.com/assets/1567433/13918338/f8670eea-ef7f-11e5-814d-f15bdfd6b2c0.png" height="180"/>

# Powerful Image Loading System

<p align="left">
<img src="https://img.shields.io/cocoapods/v/Nuke.svg?label=version">
<img src="https://img.shields.io/badge/platforms-iOS%2C%20macOS%2C%20watchOS%2C%20tvOS-lightgrey.svg">
<img src="https://img.shields.io/badge/test%20coverage-100%25-brightgreen.svg">
<a href="https://travis-ci.org/kean/Nuke"><img src="https://img.shields.io/travis/kean/Nuke/master.svg"></a>
</p>

<blockquote>
<p>Upgrading from the previous version? Use a <a href="https://github.com/kean/Nuke/blob/master/Documentation/Migrations"><strong>Migration Guide</strong></a>.</p>
</blockquote>

<p>Nuke provides a simple and efficient way to download and display images in your app. Behind its clear and concise API is an advanced architecture which enables its unique features and offers virtually unlimited possibilities for customization.</p>

<blockquote>
<p><strong>Fast LRU memory and disk cache</strong> · <strong>SwiftUI</strong> · <strong>Smart background decompression</strong> · <strong>Image processing</strong> · <strong>Elegant builder API</strong> · <strong>Resumable downloads</strong> · <strong>Intelligent deduplication</strong> · <strong>Request prioritization</strong> · <strong>Low data mode</strong> · <strong>Prefetching</strong> · <strong>Rate limiting</strong> · <strong>Progressive JPEG, HEIF, WebP, SVG, GIF</strong> · <strong>Alamofire</strong> · <strong>Combine</strong> · <strong>Reactive extensions</strong></p>
</blockquote>

<p><br/></p>
<h2 id='getting-started' class='heading'>Getting Started</h2>

<p>Nuke is easy to learn and use. Here is an overview of its APIs and features:</p>

<ul>
<li><strong>Image View Extensions</strong> ‣ <a href="#image-view-extensions">UI Extensions</a> · <a href="#in-a-table-view">Table View</a> · <a href="#placeholders-transitions-content-modes">Placeholders, Transitions</a> · <a href="#imagerequest"><code><a href="Structs/ImageRequest.html">ImageRequest</a></code></a></li>
<li><strong>Image Processing</strong> ‣ <a href="#resize"><code>Resize</code></a> · <a href="#circle"><code>Circle</code></a> · <a href="#roundedcorners"><code>RoundedCorners</code></a> · <a href="#gaussianblur"><code>GaussianBlur</code></a> · <a href="#coreimagefilter"><code>CoreImageFilter</code></a> · <a href="#custom-processors">Custom Processors</a></li>
<li><strong>Image Pipeline</strong> ‣ <a href="#image-pipeline">Load Image</a> · <a href="#imagetask"><code><a href="Classes/ImageTask.html">ImageTask</a></code></a> · <a href="#customize-image-pipeline">Customize Image Pipeline</a> · <a href="#default-image-pipeline">Default Pipeline</a></li>
<li><strong>Caching</strong> ‣ <a href="#lru-memory-cache">LRU Memory Cache</a> · <a href="#http-disk-cache">HTTP Disk Cache</a> · <a href="#aggressive-lru-disk-cache">Aggressive LRU Disk Cache</a></li>
<li><strong>Advanced Features</strong> ‣ <a href="#image-preheating">Preheat Images</a> · <a href="#progressive-decoding">Progressive Decoding</a></li>
<li><a href="#h_plugins"><strong>Extensions</strong></a> ‣ <a href="#fetch-image">FetchImage</a> · <a href="#builder">Builder</a> · <a href="#combine">Combine</a> · <a href="#rxnuke">RxNuke</a> · <a href="#h_plugins">And More</a></li>
</ul>

<p>To learn more see a full <a href="https://kean-org.github.io/docs/nuke/reference/8.0/index.html"><strong>API Reference</strong></a>, and check out the demo project included in the repo. When you are ready to install, follow the <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/Installation%20Guide.md"><strong>Installation Guide</strong></a>. See <a href="#h_requirements"><strong>Requirements</strong></a> for a list of supported platforms. If you encounter any issues, the <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/troubleshooting.md"><strong>Troubleshooting Guide</strong></a> might help. </p>

<p><img src="https://img.shields.io/badge/supports-Swift%20Package%20Manager%2C%20CocoaPods%2C%20Carthage-green.svg"></p>

<p>To learn more about the pipeline and the supported formats, see the dedicated guides.</p>

<ul>
<li><a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-formats.md"><strong>Image Formats</strong></a> ‣ <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-formats.md#progressive-jpeg">Progressive JPEG</a> · <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-formats.md#heif">HEIF</a> · <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-formats.md#gif">GIF</a> · <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-formats.md#svg">SVG</a> · <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-formats.md#webp">WebP</a></li>
<li><a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-pipeline.md"><strong>Image Pipeline</strong></a> ‣ <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-pipeline.md#data-loading-and-caching">Data Loading</a> · <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-pipeline.md#resumable-downloads">Resumable Downloads</a> · <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-pipeline.md#memory-cache">Memory Cache</a> · <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-pipeline.md#deduplication">Deduplication</a> · <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-pipeline.md#decompression">Decompression</a> · <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-pipeline.md#performance">Performance</a></li>
</ul>

<p>If you&rsquo;d like to contribute to Nuke see <a href="#h_contribute"><strong>Contributing</strong></a>.</p>

<p><br/></p>
<h1 id='image-view-extensions' class='heading'>Image View Extensions</h1>

<p><img align="right" src="https://user-images.githubusercontent.com/1567433/59150381-d34beb80-8a22-11e9-8d9a-6b1527ffc9e1.png" width="360"/></p>

<p>Download and display an image in an image view with a single line of code:</p>
<pre class="highlight swift"><code><span class="kt">Nuke</span><span class="o">.</span><span class="nf">loadImage</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="nv">into</span><span class="p">:</span> <span class="n">imageView</span><span class="p">)</span>
</code></pre>

<p>Nuke will check if the image exists in the memory cache, and if it does, will instantly display it. If not, the image data will be loaded, decoded, processed, and decompressed in the background.</p>

<blockquote>
<p>See <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-pipeline.md">Image Pipeline Guide</a> to learn how images are downloaded and processed.</p>
</blockquote>
<h3 id='in-a-table-view' class='heading'>In a Table View</h3>

<p>When you request a new image for the existing view, Nuke will prepare it for reuse and cancel any outstanding requests for the view.</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="n">cellForItemAt</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPaths</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UITableViewCell</span> <span class="p">{</span>
    <span class="cm">/* Create a cell ... */</span>
    <span class="kt">Nuke</span><span class="o">.</span><span class="nf">loadImage</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="nv">into</span><span class="p">:</span> <span class="n">cell</span><span class="o">.</span><span class="n">imageView</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<blockquote>
<p>When the view is deallocated, an associated request gets canceled automatically. To manually cancel the request, call <code>Nuke.cancelRequest(for: imageView)</code>.</p>
</blockquote>
<h3 id='placeholders-transitions-content-modes' class='heading'>Placeholders, Transitions, Content Modes</h3>

<p>Use <code><a href="Structs/ImageLoadingOptions.html">ImageLoadingOptions</a></code> to set a <code>placeholder</code>, select one of the built-in <code>transitions</code>, or provide a custom one.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">options</span> <span class="o">=</span> <span class="kt">ImageLoadingOptions</span><span class="p">(</span>
    <span class="nv">placeholder</span><span class="p">:</span> <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="s">"placeholder"</span><span class="p">),</span>
    <span class="nv">transition</span><span class="p">:</span> <span class="o">.</span><span class="nf">fadeIn</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.33</span><span class="p">)</span>
<span class="p">)</span>
<span class="kt">Nuke</span><span class="o">.</span><span class="nf">loadImage</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="n">options</span><span class="p">,</span> <span class="nv">into</span><span class="p">:</span> <span class="n">imageView</span><span class="p">)</span>
</code></pre>

<p>You can even customize content modes per image type:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">options</span> <span class="o">=</span> <span class="kt">ImageLoadingOptions</span><span class="p">(</span>
    <span class="nv">placeholder</span><span class="p">:</span> <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="s">"placeholder"</span><span class="p">),</span>
    <span class="nv">failureImage</span><span class="p">:</span> <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="s">"failureImage"</span><span class="p">),</span>
    <span class="nv">contentModes</span><span class="p">:</span> <span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">success</span><span class="p">:</span> <span class="o">.</span><span class="n">scaleAspectFill</span><span class="p">,</span> <span class="nv">failure</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="nv">placeholder</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span>
<span class="p">)</span>
</code></pre>

<blockquote>
<p>In case you want all image views to have the same behavior, you can modify <code><a href="Structs/ImageLoadingOptions.html#/s:4Nuke19ImageLoadingOptionsV6sharedACvpZ">ImageLoadingOptions.shared</a></code>.</p>
</blockquote>

<p>Please keep in mind that the built-in extensions for image views are designed to get you up and running as quickly as possible. If you want to have more control, or use some of the advanced features, like animated images, it is recommended to use <code><a href="Classes/ImagePipeline.html">ImagePipeline</a></code> directly in your custom views.</p>
<h3 id='code-imagerequest-code' class='heading'><code><a href="Structs/ImageRequest.html">ImageRequest</a></code></h3>

<p><code><a href="Structs/ImageRequest.html">ImageRequest</a></code> allows you to set image processors, change the request priority and more:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">ImageRequest</span><span class="p">(</span>
    <span class="nv">url</span><span class="p">:</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"http://..."</span><span class="p">),</span>
    <span class="nv">processors</span><span class="p">:</span> <span class="p">[</span><span class="kt">ImageProcessors</span><span class="o">.</span><span class="kt">Resize</span><span class="p">(</span><span class="nv">size</span><span class="p">:</span> <span class="n">imageView</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="p">)],</span>
    <span class="nv">priority</span><span class="p">:</span> <span class="o">.</span><span class="n">high</span>
<span class="p">)</span>
</code></pre>

<blockquote>
<p>Another way to apply processors is by setting the default <code>processors</code> on <code><a href="Classes/ImagePipeline/Configuration.html">ImagePipeline.Configuration</a></code>. These processors will be applied to all images loaded by the pipeline. If the request has a non-empty array of <code>processors</code>, they are going to be applied instead.</p>
</blockquote>

<p>The advanced options available via <code><a href="Structs/ImageRequestOptions.html">ImageRequestOptions</a></code>. For example, you can provide a <code>filteredURL</code> to be used as a key for caching in case the URL contains transient query parameters.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">ImageRequest</span><span class="p">(</span>
    <span class="nv">url</span><span class="p">:</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"http://example.com/image.jpeg?token=123"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>
    <span class="nv">options</span><span class="p">:</span> <span class="kt">ImageRequestOptions</span><span class="p">(</span>
        <span class="nv">filteredURL</span><span class="p">:</span> <span class="s">"http://example.com/image.jpeg"</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre>

<blockquote>
<p>There are more options available, to see all of them check the inline documentation for <code><a href="Structs/ImageRequestOptions.html">ImageRequestOptions</a></code>.</p>
</blockquote>

<p><br/></p>
<h1 id='image-processing' class='heading'>Image Processing</h1>

<p><img align="right" src="https://user-images.githubusercontent.com/1567433/59151404-cb944300-8a32-11e9-9c58-dbed9789080f.png" width="360"/></p>

<p>Nuke features a powerful and efficient image processing infrastructure with multiple built-in processors which you can find in <code><a href="Enums/ImageProcessors.html">ImageProcessors</a></code> namespace:, e.g. <code><a href="Enums/ImageProcessors/Resize.html">ImageProcessors.Resize</a></code>.</p>

<blockquote>
<p>This and other screenshots are from the demo project included in the repo.</p>
</blockquote>
<h3 id='code-resize-code' class='heading'><code>Resize</code></h3>

<p>To resize an image, use <code><a href="Enums/ImageProcessors/Resize.html">ImageProcessors.Resize</a></code>:</p>
<pre class="highlight swift"><code><span class="kt">ImageRequest</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="nv">processors</span><span class="p">:</span> <span class="p">[</span>
    <span class="kt">ImageProcessors</span><span class="o">.</span><span class="kt">Resize</span><span class="p">(</span><span class="nv">size</span><span class="p">:</span> <span class="n">imageView</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
<span class="p">])</span>
</code></pre>

<p>By default, the target size is in points. When the image is loaded, Nuke will downscale it to fill the target area maintaining the aspect ratio. To crop the image set <code>crop</code> to <code>true</code>. For more options, see <code><a href="Enums/ImageProcessors/Resize.html">ImageProcessors.Resize</a></code> documentation.</p>

<blockquote>
<p>Use an optional <a href="#builder">Builder</a> package for a more concise API. </p>
<pre class="highlight plaintext"><code>pipeline.image(with: URL(string: "https://")!)
    .resize(width: 320)
    .blur(radius: 10)
</code></pre>
</blockquote>
<h3 id='code-circle-code' class='heading'><code>Circle</code></h3>

<p>Rounds the corners of an image into a circle with an optional border.</p>
<pre class="highlight swift"><code><span class="kt">ImageRequest</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="nv">processors</span><span class="p">:</span> <span class="p">[</span>
    <span class="kt">ImageProcessors</span><span class="o">.</span><span class="kt">Circle</span><span class="p">()</span>
<span class="p">])</span>
</code></pre>
<h3 id='code-roundedcorners-code' class='heading'><code>RoundedCorners</code></h3>

<p>Rounds the corners of an image to the specified radius. Make sure you resize the image to exactly match the size of the view in which it gets displayed so that the border appears correctly.s </p>
<pre class="highlight swift"><code><span class="kt">ImageRequest</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="nv">processors</span><span class="p">:</span> <span class="p">[</span>
    <span class="kt">ImageProcessors</span><span class="o">.</span><span class="kt">Circle</span><span class="p">(</span><span class="nv">radius</span><span class="p">:</span> <span class="mi">16</span><span class="p">)</span>
<span class="p">])</span>
</code></pre>
<h3 id='code-gaussianblur-code' class='heading'><code>GaussianBlur</code></h3>

<p><code>ImageProcessors.GaussianBlur</code> blurs the input image using one of the <a href="https://developer.apple.com/library/archive/documentation/GraphicsImaging/Reference/CoreImageFilterReference/index.html">Core Image</a> filters.</p>
<h3 id='code-coreimagefilter-code' class='heading'><code>CoreImageFilter</code></h3>

<p>Apply any of the vast number <a href="https://developer.apple.com/library/archive/documentation/GraphicsImaging/Reference/CoreImageFilterReference/index.html">Core Image filters</a> using <code>ImageProcessors.CoreImageFilter</code>:</p>
<pre class="highlight swift"><code><span class="kt">ImageProcessors</span><span class="o">.</span><span class="kt">CoreImageFilter</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"CISepiaTone"</span><span class="p">)</span>
</code></pre>
<h3 id='custom-processors' class='heading'>Custom Processors</h3>

<p>For simple one-off operations, use <code><a href="Enums/ImageProcessors/Anonymous.html">ImageProcessors.Anonymous</a></code> to create a processor with a closure.</p>

<p>Custom processors need to implement <code><a href="Protocols/ImageProcessing.html">ImageProcessing</a></code> protocol. For the basic image processing needs, implement <code>process(_:)</code> method and create an identifier which uniquely identifies the processor. For processors with no input parameters, you can return a static string.</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">ImageProcessing</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">process</span><span class="p">(</span><span class="nv">image</span><span class="p">:</span> <span class="kt">UIImage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIImage</span><span class="p">?</span> <span class="c1">// NSImage on macOS</span>
    <span class="k">var</span> <span class="nv">identifier</span><span class="p">:</span> <span class="kt">Strings</span>
<span class="p">}</span>
</code></pre>

<p>If your processor needs to manipulate image metadata (<code><a href="Structs/ImageContainer.html">ImageContainer</a></code>), or get access to more information via <code><a href="Structs/ImageProcessingContext.html">ImageProcessingContext</a></code>, there is an additional method that you can implement in additon to <code>process(_:)</code>.</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">ImageProcessing</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">process</span><span class="p">(</span><span class="n">_</span> <span class="n">image</span> <span class="nv">container</span><span class="p">:</span> <span class="kt">ImageContainer</span><span class="p">,</span> <span class="nv">context</span><span class="p">:</span> <span class="kt">ImageProcessingContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">ImageContainer</span><span class="p">?</span>
<span class="p">}</span>
</code></pre>

<p>In addition to <code>var identfier: String</code>, you can implement <code>var hashableIdentifier: AnyHashable</code> to be used by the memory cache where strings manipulationos swould be too slow. By default, this method returns String <code>identifier</code>. A common approach is to make your processor <code>Hashable</code> and return <code>self</code> from <code>hashableIdentifier</code>.</p>

<p><br/></p>
<h1 id='image-pipeline' class='heading'>Image Pipeline</h1>

<p>At the core of Nuke is the <code><a href="Classes/ImagePipeline.html">ImagePipeline</a></code> class. Use the pipeline directly to load images without displaying them:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">task</span> <span class="o">=</span> <span class="kt">ImagePipeline</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">loadImage</span><span class="p">(</span>
    <span class="nv">with</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
    <span class="nv">progress</span><span class="p">:</span> <span class="p">{</span> <span class="n">_</span><span class="p">,</span> <span class="n">completed</span><span class="p">,</span> <span class="n">total</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"progress updated"</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nv">completion</span><span class="p">:</span> <span class="p">{</span> <span class="nv">result</span><span class="p">:</span> <span class="kt">Result</span><span class="o">&lt;</span><span class="kt">ImageResponse</span><span class="p">,</span> <span class="kt">ImagePipeline</span><span class="o">.</span><span class="kt">Error</span><span class="o">&gt;</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"task completed"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre>

<blockquote>
<p>To download the data without doing any expensive decoding or processing, use <code>loadData(with:progress:completion:)</code>.</p>
</blockquote>
<h3 id='code-imagetask-code' class='heading'><code><a href="Classes/ImageTask.html">ImageTask</a></code></h3>

<p>When you start the request, the pipeline returns an <code><a href="Classes/ImageTask.html">ImageTask</a></code> object, which can be used for cancelation and more.</p>
<pre class="highlight swift"><code><span class="n">task</span><span class="o">.</span><span class="nf">cancel</span><span class="p">()</span>
<span class="n">task</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="o">.</span><span class="n">high</span>
</code></pre>
<h3 id='customize-image-pipeline' class='heading'>Customize Image Pipeline</h3>

<p>If you want to build a system that fits your specific needs, you won&rsquo;t be disappointed. There are a <em>lot of things</em> to tweak. You can set custom data loaders and caches, configure image encoders and decoders, change the number of concurrent operations for each individual stage, disable and enable features like deduplication and rate limiting, and more.</p>

<blockquote>
<p>To learn more see the inline documentation for <code><a href="Classes/ImagePipeline/Configuration.html">ImagePipeline.Configuration</a></code> and <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/image-pipeline.md">Image Pipeline Guide</a>.</p>
</blockquote>

<p><img align="right" src="https://user-images.githubusercontent.com/1567433/59148462-94f60280-8a09-11e9-906a-6c7209b8f8c8.png" width="360"/></p>

<p>Here are the protocols which can be used for customization:</p>

<ul>
<li><code><a href="Protocols/DataLoading.html">DataLoading</a></code> – Download (or return cached) image data</li>
<li><code><a href="Protocols/DataCaching.html">DataCaching</a></code> – Store image data on disk</li>
<li><code><a href="Protocols/ImageDecoding.html">ImageDecoding</a></code> – Convert data into images (see <code>_ImageDecoding</code> for new experimental decoding features)</li>
<li><code><a href="Protocols/ImageEncoding.html">ImageEncoding</a></code> - Convert images into data</li>
<li><code><a href="Protocols/ImageProcessing.html">ImageProcessing</a></code> – Apply image transformations</li>
<li><code><a href="Protocols/ImageCaching.html">ImageCaching</a></code> – Store images into a memory cache</li>
</ul>

<p>The entire configuration is described by the <code><a href="Classes/ImagePipeline/Configuration.html">ImagePipeline.Configuration</a></code> struct. To create a pipeline with a custom configuration either call the <code>ImagePipeline(configuration:)</code> initializer or use the convenience one:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">pipeline</span> <span class="o">=</span> <span class="kt">ImagePipeline</span> <span class="p">{</span>
    <span class="nv">$0</span><span class="o">.</span><span class="n">dataLoader</span> <span class="o">=</span> <span class="o">...</span>
    <span class="nv">$0</span><span class="o">.</span><span class="n">dataLoadingQueue</span> <span class="o">=</span> <span class="o">...</span>
    <span class="nv">$0</span><span class="o">.</span><span class="n">imageCache</span> <span class="o">=</span> <span class="o">...</span>
    <span class="o">...</span>
<span class="p">}</span>
</code></pre>

<p>And then set the new pipeline as default:</p>
<pre class="highlight swift"><code><span class="kt">ImagePipeline</span><span class="o">.</span><span class="n">shared</span> <span class="o">=</span> <span class="n">pipeline</span>
</code></pre>
<h3 id='default-image-pipeline' class='heading'>Default Image Pipeline</h3>

<p>The default image pipeline is initialized with the following dependencies:</p>
<pre class="highlight swift"><code><span class="c1">// Shared image cache with a size limit of ~20% of available RAM.</span>
<span class="n">imageCache</span> <span class="o">=</span> <span class="kt">ImageCache</span><span class="o">.</span><span class="n">shared</span>

<span class="c1">// Data loader with a default `URLSessionConfiguration` and a custom `URLCache`</span>
<span class="c1">// with memory capacity 0, and disk capacity 150 MB.</span>
<span class="n">dataLoader</span> <span class="o">=</span> <span class="kt">DataLoader</span><span class="p">()</span>

<span class="c1">// Custom aggressive disk cache is disabled by default.</span>
<span class="n">dataCache</span> <span class="o">=</span> <span class="kc">nil</span>

<span class="c1">// By default uses the decoder from the global registry and the default encoder.</span>
<span class="n">makeImageDecoder</span> <span class="o">=</span> <span class="kt">ImageDecoderRegistry</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">decoder</span><span class="p">(</span><span class="nv">for</span><span class="p">:)</span>
<span class="n">makeImageEncoder</span> <span class="o">=</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span> <span class="kt">ImageEncoders</span><span class="o">.</span><span class="kt">Default</span><span class="p">()</span> <span class="p">}</span>
</code></pre>

<p>Each operation in the pipeline runs on a dedicated queue:</p>
<pre class="highlight swift"><code><span class="n">dataLoadingQueue</span><span class="o">.</span><span class="n">maxConcurrentOperationCount</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">dataCachingQueue</span><span class="o">.</span><span class="n">maxConcurrentOperationCount</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">imageDecodingQueue</span><span class="o">.</span><span class="n">maxConcurrentOperationCount</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">imageEncodingQueue</span><span class="o">.</span><span class="n">maxConcurrentOperationCount</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">imageProcessingQueue</span><span class="o">.</span><span class="n">maxConcurrentOperationCount</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">imageDecompressingQueue</span><span class="o">.</span><span class="n">maxConcurrentOperationCount</span> <span class="o">=</span> <span class="mi">2</span>
</code></pre>

<p>There is a list of pipeline settings which you can tweak:</p>
<pre class="highlight swift"><code><span class="c1">// Automatically decompress images in the background by default.</span>
<span class="n">isDecompressionEnabled</span> <span class="o">=</span> <span class="kc">true</span>

<span class="c1">// Configure what content to store in the custom disk cache.</span>
<span class="n">dataCacheOptions</span><span class="o">.</span><span class="n">storedItems</span> <span class="o">=</span> <span class="p">[</span><span class="o">.</span><span class="n">finalImage</span><span class="p">]</span> <span class="c1">// [.originalImageData]</span>

<span class="c1">// Avoid doing any duplicated work when loading or processing images.</span>
<span class="n">isDeduplicationEnabled</span> <span class="o">=</span> <span class="kc">true</span>

<span class="c1">// Rate limit the requests to prevent trashing of the subsystems.</span>
<span class="n">isRateLimiterEnabled</span> <span class="o">=</span> <span class="kc">true</span>

<span class="c1">// Progressive decoding is an opt-in feature because it is resource intensive.</span>
<span class="n">isProgressiveDecodingEnabled</span> <span class="o">=</span> <span class="kc">false</span>

<span class="c1">// Don't store progressive previews in memory cache.</span>
<span class="nv">$0</span><span class="o">.</span><span class="n">isStoringPreviewsInMemoryCache</span> <span class="o">=</span> <span class="kc">false</span>

<span class="c1">// If the data task is terminated (either because of a failure or a</span>
<span class="c1">// cancellation) and the image was partially loaded, the next load will</span>
<span class="c1">// resume where it was left off.</span>
<span class="n">isResumableDataEnabled</span> <span class="o">=</span> <span class="kc">true</span>
</code></pre>

<p>And also a few global options shared between all pipelines:</p>
<pre class="highlight swift"><code><span class="c1">// Enable to start using `os_signpost` to monitor the pipeline</span>
<span class="c1">// performance using Instruments.</span>
<span class="kt">ImagePipeline</span><span class="o">.</span><span class="kt">Configuration</span><span class="o">.</span><span class="n">isSignpostLoggingEnabled</span> <span class="o">=</span> <span class="kc">false</span>
</code></pre>

<p><br/></p>
<h1 id='caching' class='heading'>Caching</h1>
<h3 id='lru-memory-cache' class='heading'>LRU Memory Cache</h3>

<p>Nuke&rsquo;s default <code><a href="Classes/ImagePipeline.html">ImagePipeline</a></code> has two cache layers.</p>

<p>First, there is a memory cache for storing processed images which are ready for display.</p>
<pre class="highlight swift"><code><span class="c1">// Configure cache</span>
<span class="kt">ImageCache</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">costLimit</span> <span class="o">=</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">100</span> <span class="c1">// 100 MB</span>
<span class="kt">ImageCache</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">countLimit</span> <span class="o">=</span> <span class="mi">100</span>
<span class="kt">ImageCache</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">ttl</span> <span class="o">=</span> <span class="mi">120</span> <span class="c1">// Invalidate image after 120 sec</span>

<span class="c1">// Read and write images</span>
<span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">ImageRequest</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
<span class="kt">ImageCache</span><span class="o">.</span><span class="n">shared</span><span class="p">[</span><span class="n">request</span><span class="p">]</span> <span class="o">=</span> <span class="kt">ImageContainer</span><span class="p">(</span><span class="nv">image</span><span class="p">:</span> <span class="n">image</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">image</span> <span class="o">=</span> <span class="kt">ImageCache</span><span class="o">.</span><span class="n">shared</span><span class="p">[</span><span class="n">request</span><span class="p">]</span>

<span class="c1">// Clear cache</span>
<span class="kt">ImageCache</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">removeAll</span><span class="p">()</span>
</code></pre>

<p><code><a href="Classes/ImageCache.html">ImageCache</a></code> uses the <a href="https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU)">LRU</a> algorithm – least recently used entries are removed first during the sweep.</p>
<h3 id='http-disk-cache' class='heading'>HTTP Disk Cache</h3>

<p>Unprocessed image data is stored with <code>URLCache</code>.</p>
<pre class="highlight swift"><code><span class="c1">// Configure cache</span>
<span class="kt">DataLoader</span><span class="o">.</span><span class="n">sharedUrlCache</span><span class="o">.</span><span class="n">diskCapacity</span> <span class="o">=</span> <span class="mi">100</span>
<span class="kt">DataLoader</span><span class="o">.</span><span class="n">sharedUrlCache</span><span class="o">.</span><span class="n">memoryCapacity</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">// Read and write responses</span>
<span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">ImageRequest</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">_</span> <span class="o">=</span> <span class="kt">DataLoader</span><span class="o">.</span><span class="n">sharedUrlCache</span><span class="o">.</span><span class="nf">cachedResponse</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">urlRequest</span><span class="p">)</span>
<span class="kt">DataLoader</span><span class="o">.</span><span class="n">sharedUrlCache</span><span class="o">.</span><span class="nf">removeCachedResponse</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">urlRequest</span><span class="p">)</span>

<span class="c1">// Clear cache</span>
<span class="kt">DataLoader</span><span class="o">.</span><span class="n">sharedUrlCache</span><span class="o">.</span><span class="nf">removeAllCachedResponses</span><span class="p">()</span>
</code></pre>
<h3 id='aggressive-lru-disk-cache' class='heading'>Aggressive LRU Disk Cache</h3>

<p>If HTTP caching is not your cup of tea, you can try using a custom LRU disk cache for fast and reliable <em>aggressive</em> data caching (ignores <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control">HTTP cache control</a>). You can enable it using the pipeline configuration.</p>
<pre class="highlight swift"><code><span class="kt">ImagePipeline</span> <span class="p">{</span>
    <span class="nv">$0</span><span class="o">.</span><span class="n">dataCache</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="kt">DataCache</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"com.myapp.datacache"</span><span class="p">)</span>

    <span class="c1">// Also consider disabling the native HTTP cache, see `DataLoader`.</span>
<span class="p">}</span>
</code></pre>

<p>By default, the pipeline stores only the original image data. To store downloaded and processed images instead, set <code>dataCacheOptions.storedItems</code> to <code>[.finalImage]</code>. This option is useful if you want to store processed, e.g. downsampled images, or if you want to transcode images to a more efficient format, like HEIF.</p>

<blockquote>
<p>To save disk space see <code><a href="Enums/ImageEncoders/ImageIO.html">ImageEncoders.ImageIO</a></code> and  <code>ImageEncoder.isHEIFPreferred</code> option for HEIF support.</p>
</blockquote>

<p><br/></p>
<h1 id='advanced-features' class='heading'>Advanced Features</h1>
<h3 id='image-preheating' class='heading'>Image Preheating</h3>

<p>Prefetching images in advance can dramatically improve your app&rsquo;s user experience.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">preheater</span> <span class="o">=</span> <span class="kt">ImagePreheater</span><span class="p">()</span>
<span class="n">preheater</span><span class="o">.</span><span class="nf">startPreheating</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">urls</span><span class="p">)</span>

<span class="c1">// Cancels all of the preheating tasks created for the given requests.</span>
<span class="n">preheater</span><span class="o">.</span><span class="nf">stopPreheating</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">urls</span><span class="p">)</span>
</code></pre>

<p>Keep in mind that prefetching takes up users&rsquo; data and puts extra pressure on CPU and memory. To reduce the CPU and memory usage, you have an option to choose only the disk cache as a prefetching destination:</p>
<pre class="highlight swift"><code><span class="c1">// The preheater with `.diskCache` destination will skip image data decoding</span>
<span class="c1">// entirely to reduce CPU and memory usage. It will still load the image data</span>
<span class="c1">// and store it in disk caches to be used later.</span>
<span class="k">let</span> <span class="nv">preheater</span> <span class="o">=</span> <span class="kt">ImagePreheater</span><span class="p">(</span><span class="nv">destination</span><span class="p">:</span> <span class="o">.</span><span class="n">diskCache</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>On iOS, you can use <a href="https://developer.apple.com/reference/uikit/uitableviewdatasourceprefetching">prefetching APIs</a> in combination with <code><a href="Classes/ImagePreheater.html">ImagePreheater</a></code> to automate the process.</p>
</blockquote>
<h3 id='progressive-decoding' class='heading'>Progressive Decoding</h3>

<p>To enable progressive image decoding set <code>isProgressiveDecodingEnabled</code> configuration option to <code>true</code>.</p>

<p><img align="right" width="360" alt="Progressive JPEG" src="https://user-images.githubusercontent.com/1567433/59148764-3af73c00-8a0d-11e9-9d49-ded2d509380a.png"></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">pipeline</span> <span class="o">=</span> <span class="kt">ImagePipeline</span> <span class="p">{</span>
    <span class="nv">$0</span><span class="o">.</span><span class="n">isProgressiveDecodingEnabled</span> <span class="o">=</span> <span class="kc">true</span>

    <span class="c1">// If `true`, the pipeline will store all of the progressively generated previews</span>
    <span class="c1">// in the memory cache. All of the previews have `isPreview` flag set to `true`.</span>
    <span class="nv">$0</span><span class="o">.</span><span class="n">isStoringPreviewsInMemoryCache</span> <span class="o">=</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre>

<p>And that&rsquo;s it, the pipeline will automatically do the right thing and deliver the progressive scans via <code>progress</code> closure as they arrive:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">imageView</span> <span class="o">=</span> <span class="kt">UIImageView</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">task</span> <span class="o">=</span> <span class="kt">ImagePipeline</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">loadImage</span><span class="p">(</span>
    <span class="nv">with</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
    <span class="nv">progress</span><span class="p">:</span> <span class="p">{</span> <span class="n">response</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="k">in</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">response</span> <span class="o">=</span> <span class="n">response</span> <span class="p">{</span>
            <span class="n">imageView</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">image</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nv">completion</span><span class="p">:</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="c1">// Display the final image</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre>

<p><br/></p>

<p><a name="h_plugins"></a></p>
<h2 id='extensions' class='heading'>Extensions</h2>

<p>There is a variety of extensions available for Nuke:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="https://github.com/kean/FetchImage"><strong>FetchImage</strong></a></td>
<td>SwiftUI integration</td>
</tr>
<tr>
<td><a href="https://github.com/kean/ImagePublisher"><strong>ImagePublisher</strong></a></td>
<td>Combine publishers for Nuke</td>
</tr>
<tr>
<td><a href="https://github.com/kean/ImageTaskBuilder"><strong>ImageTaskBuilder</strong></a></td>
<td>A fun and convenient way to use Nuke</td>
</tr>
<tr>
<td><a href="https://github.com/kean/Nuke-Alamofire-Plugin"><strong>Alamofire Plugin</strong></a></td>
<td>Replace networking layer with <a href="https://github.com/Alamofire/Alamofire">Alamofire</a> and combine the power of both frameworks</td>
</tr>
<tr>
<td><a href="https://github.com/kean/RxNuke"><strong>RxNuke</strong></a></td>
<td><a href="https://github.com/ReactiveX/RxSwift">RxSwift</a> extensions for Nuke with examples of common use cases solved by Rx</td>
</tr>
<tr>
<td><a href="https://github.com/ryokosuge/Nuke-WebP-Plugin"><strong>WebP Plugin</strong></a></td>
<td><strong>[Community]</strong> <a href="https://developers.google.com/speed/webp/">WebP</a> support, built by <a href="https://github.com/ryokosuge">Ryo Kosuge</a></td>
</tr>
<tr>
<td><a href="https://github.com/kean/Nuke-Gifu-Plugin"><strong>Gifu Plugin</strong></a></td>
<td>Use <a href="https://github.com/kaishin/Gifu">Gifu</a> to load and display animated GIFs</td>
</tr>
<tr>
<td><a href="https://github.com/kean/Nuke-AnimatedImage-Plugin"><strong>FLAnimatedImage Plugin</strong></a></td>
<td>Use <a href="https://github.com/Flipboard/FLAnimatedImage">FLAnimatedImage</a> to load and display <a href="(https://www.youtube.com/watch?v=fEJqQMJrET4)">animated GIFs</a></td>
</tr>
<tr>
<td><a href="https://github.com/roubachof/Xamarin.Forms.Nuke"><strong>Xamarin NuGet</strong></a></td>
<td><strong>[Community]</strong> Makes it possible to use Nuke from Xamarin</td>
</tr>
</tbody></table>

<p><br/></p>

<p><a name="fetch-image"></a></p>
<h3 id='a-href-https-github-com-kean-fetchimage-code-fetchimage-code-a' class='heading'><a href="https://github.com/kean/FetchImage"><code>FetchImage</code></a></h3>

<p><a href="https://github.com/kean/FetchImage"><code>FetchImage</code></a> is a Swift package that makes it easy to download images using Nuke and display them in SwiftUI apps. For more info, see the <a href="https://kean.github.io/post/introducing-fetch-image">introductory post</a>. </p>

<blockquote>
<p><strong>Note</strong>: This is an API preview, it might change in the future.</p>
</blockquote>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">ImageView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">image</span><span class="p">:</span> <span class="kt">FetchImage</span>

    <span class="kd">public</span> <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">ZStack</span> <span class="p">{</span>
            <span class="kt">Rectangle</span><span class="p">()</span><span class="o">.</span><span class="nf">fill</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">gray</span><span class="p">)</span>
            <span class="n">image</span><span class="o">.</span><span class="n">view</span><span class="p">?</span>
                <span class="o">.</span><span class="nf">resizable</span><span class="p">()</span>
                <span class="o">.</span><span class="nf">aspectRatio</span><span class="p">(</span><span class="nv">contentMode</span><span class="p">:</span> <span class="o">.</span><span class="n">fill</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p><strong>Low Data Mode</strong></p>

<p><a href="https://github.com/kean/FetchImage"><code>FetchImage</code></a> also offers built-in support for low-data mode via a special initializer:</p>
<pre class="highlight swift"><code><span class="kt">FetchImage</span><span class="p">(</span><span class="nv">regularUrl</span><span class="p">:</span> <span class="n">highQualityUrl</span><span class="p">,</span> <span class="nv">lowDataUrl</span><span class="p">:</span> <span class="n">lowQualityUrl</span><span class="p">)</span>
</code></pre>
<h3 id='builder' class='heading'>Builder</h3>

<p>Find the default API a bit boring? Try <a href="https://github.com/kean/ImageTaskBuilder">ImageTaskBuilder</a>, a fun and convenient way to use Nuke.</p>
<pre class="highlight swift"><code><span class="kt">ImagePipeline</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">image</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"https://"</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">fill</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">320</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">blur</span><span class="p">(</span><span class="nv">radius</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">priority</span><span class="p">(</span><span class="o">.</span><span class="n">high</span><span class="p">)</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="p">}</span>

<span class="c1">// Returns `ImageTask` when started.</span>
</code></pre>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">imageView</span><span class="p">:</span> <span class="kt">UIImageView</span>

<span class="kt">ImagePipeline</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">image</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"https://"</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">fill</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="n">imageView</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">display</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="n">imageView</span><span class="p">)</span>
</code></pre>
<h3 id='rxnuke' class='heading'>RxNuke</h3>

<p><a href="https://github.com/kean/RxNuke">RxNuke</a> adds <a href="https://github.com/ReactiveX/RxSwift">RxSwift</a> extensions for Nuke and enables common use cases: <a href="https://github.com/kean/RxNuke#going-from-low-to-high-resolution">Going from low to high resolution</a> | <a href="https://github.com/kean/RxNuke#loading-the-first-available-image">Loading the first available image</a> | <a href="https://github.com/kean/RxNuke#showing-stale-image-while-validating-it">Showing stale image while validating it</a> | <a href="https://github.com/kean/RxNuke#load-multiple-images-display-all-at-once">Load multiple images, display all at once</a> | <a href="https://github.com/kean/RxNuke#auto-retry">Auto retry on failures</a> | <a href="https://github.com/kean/RxNuke#use-cases">And more</a></p>

<p>To get a taste of what you can do with this extension, take a look at how easy it is to load the low resolution image first and then switch to high resolution:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">pipeline</span> <span class="o">=</span> <span class="kt">ImagePipeline</span><span class="o">.</span><span class="n">shared</span>
<span class="kt">Observable</span><span class="o">.</span><span class="nf">concat</span><span class="p">(</span><span class="n">pipeline</span><span class="o">.</span><span class="nf">loadImage</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">lowResUrl</span><span class="p">)</span><span class="o">.</span><span class="n">orEmpty</span><span class="p">,</span>
                  <span class="n">pipeline</span><span class="o">.</span><span class="nf">loadImage</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">highResUtl</span><span class="p">)</span><span class="o">.</span><span class="n">orEmpty</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="nv">onNext</span><span class="p">:</span> <span class="p">{</span> <span class="n">imageView</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="nv">$0</span> <span class="p">})</span>
    <span class="o">.</span><span class="nf">disposed</span><span class="p">(</span><span class="nv">by</span><span class="p">:</span> <span class="n">disposeBag</span><span class="p">)</span>
</code></pre>
<h3 id='combine' class='heading'>Combine</h3>

<p><a href="https://github.com/kean/ImagePublisher">ImagePublisher</a> adds Combine publishers for Nuke and, just like <a href="https://github.com/kean/RxNuke">RxNuke</a>, enables a variety of powerful use cases.</p>

<p><br/></p>

<p><a name="h_contribute"></a></p>
<h1 id='contribution' class='heading'>Contribution</h1>

<p><a href="https://trello.com/b/Us4rHryT/nuke">Nuke&rsquo;s roadmap</a> is managed in Trello and is publicly available. If you&rsquo;d like to contribute, please feel free to create a PR.</p>

<p><a name="h_requirements"></a></p>
<h1 id='minimum-requirements' class='heading'>Minimum Requirements</h1>

<table><thead>
<tr>
<th>Nuke</th>
<th>Swift</th>
<th>Xcode</th>
<th>Platforms</th>
</tr>
</thead><tbody>
<tr>
<td>Nuke 9.0</td>
<td>Swift 5.1</td>
<td>Xcode 11.0</td>
<td>iOS 11.0 / watchOS 4.0 / macOS 10.13 / tvOS 11.0</td>
</tr>
<tr>
<td>Nuke 8.0</td>
<td>Swift 5.0</td>
<td>Xcode 10.2</td>
<td>iOS 10.0 / watchOS 3.0 / macOS 10.12 / tvOS 10.0</td>
</tr>
</tbody></table>

<p>See <a href="https://github.com/kean/Nuke/blob/master/Documentation/Guides/Installation%20Guide.md#h_requirements">Installation Guide</a> for information about the older versions.</p>
<h1 id='license' class='heading'>License</h1>

<p>Nuke is available under the MIT license. See the LICENSE file for more info.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2020 <a class="link" href="https://github.com/kean/Nuke" target="_blank" rel="external">Alexander Grebenyuk</a>. All rights reserved. (Last updated: 2020-04-01)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.1</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
