{"seeAlsoSections":[{"title":"Advanced","identifiers":["doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/caching","doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/prefetching","doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/combine","doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/plugins"],"generated":true}],"schemaVersion":{"major":0,"minor":1,"patch":0},"sections":[],"primaryContentSections":[{"kind":"content","content":[{"anchor":"Default-Configuration","level":2,"type":"heading","text":"Default Configuration"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The default image pipeline is initialized with the following dependencies:"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Shared image cache with a size limit of ~20% of available RAM.","imageCache = ImageCache.shared","","\/\/ Data loader with a default `URLSessionConfiguration` and a custom `URLCache`","\/\/ with memory capacity 0, and disk capacity 150 MB.","dataLoader = DataLoader()","","\/\/ Custom aggressive disk cache is disabled by default.","dataCache = nil","","\/\/ By default uses the decoder from the global registry and the default encoder.","makeImageDecoder = ImageDecoderRegistry.shared.decoder(for:)","makeImageEncoder = { _ in ImageEncoders.Default() }"]},{"type":"aside","style":"tip","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You have two built-in configurations to pick from "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/withURLCache"},{"type":"text","text":" (default), and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/withDataCache"},{"type":"text","text":" that have different caching behavior. Learn more in "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/caching"},{"type":"text","text":"."}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Each operation in the pipeline runs on a dedicated queue:"}]},{"type":"codeListing","syntax":"swift","code":["dataLoadingQueue.maxConcurrentOperationCount = 6","dataCachingQueue.maxConcurrentOperationCount = 2","imageDecodingQueue.maxConcurrentOperationCount = 1","imageEncodingQueue.maxConcurrentOperationCount = 1","imageProcessingQueue.maxConcurrentOperationCount = 2","imageDecompressingQueue.maxConcurrentOperationCount = 2"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"There is a list of pipeline settings which you can tweak:"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ A queue for completion and progress callbacks.","callbackQueue = DispatchQueue.main","","\/\/ Automatically decompress images in the background by default.","isDecompressionEnabled = true","","\/\/ Configure what content to store in the custom disk cache.","dataCachePolicy = .storeOriginalData","","\/\/ Avoid doing any duplicated work when loading or processing images.","isTaskCoalescingEnabled = true","","\/\/ Progressive decoding is an opt-in feature because it is resource intensive.","isProgressiveDecodingEnabled = true","","\/\/ Don't store progressive previews in memory cache.","isStoringPreviewsInMemoryCache = true","","\/\/ If the data task is terminated (either because of a failure or a","\/\/ cancellation) and the image was partially loaded, the next load will","\/\/ resume where it was left off.","isResumableDataEnabled = true","","\/\/ Rate limit the requests to prevent trashing of the subsystems.","isRateLimiterEnabled = true"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"And also a few global options shared between all pipelines:"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Enable to start using `os_signpost` to monitor the pipeline","\/\/ performance using Instruments.","ImagePipeline.Configuration.isSignpostLoggingEnabled = false"]},{"anchor":"Custom-Pipeline","level":2,"type":"heading","text":"Custom Pipeline"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you want to build a system that fits your specific needs, you won’t be disappointed. There are a "},{"type":"emphasis","inlineContent":[{"type":"text","text":"lot of things"}]},{"type":"text","text":" to tweak. You can set custom data loaders and caches, configure image encoders and decoders, change the number of concurrent operations for each stage, disable and enable features like deduplication and rate-limiting, and more."}]},{"type":"aside","style":"tip","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To learn more, see the inline documentation for "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/image-pipeline-guide"},{"type":"text","text":"."}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The protocols that can be used for customization:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/DataLoading"},{"type":"text","text":" – Download (or return cached) image data"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/DataCaching"},{"type":"text","text":" – Store image data on disk"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImageDecoding"},{"type":"text","text":" – Convert data into images"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImageEncoding"},{"type":"text","text":" - Convert images into data"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImageProcessing"},{"type":"text","text":" – Apply image transformations"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImageCaching"},{"type":"text","text":" – Store images into a memory cache"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To create a pipeline with a custom configuration, either call the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/init(configuration:delegate:)"},{"type":"text","text":" initializer or use the convenience one:"}]},{"type":"codeListing","syntax":"swift","code":["let pipeline = ImagePipeline {","    $0.dataLoader = ...","    $0.dataLoadingQueue = ...","    $0.dmageCache = ...","    ...","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"And then set the new pipeline as the default one:"}]},{"type":"codeListing","syntax":"swift","code":["ImagePipeline.shared = pipeline"]},{"anchor":"ImagePipeline-Delegate","level":2,"type":"heading","text":"ImagePipeline Delegate"},{"type":"paragraph","inlineContent":[{"type":"text","text":"New in "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/kean\/Nuke\/releases\/tag\/10.0.0"},{"type":"text","text":" is "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipelineDelegate"},{"type":"text","text":". It has a variety of advanced per-request customization options covered by the API reference."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To give you an example, it allows you to observe the pipeline events:"}]},{"type":"codeListing","syntax":"swift","code":["final class ImagePipelineObserver: ImagePipelineDelegate {","    var startedTaskCount = 0","    var cancelledTaskCount = 0","    var completedTaskCount = 0","","    var events = [ImageTaskEvent]()","","    func pipeline(_ pipeline: ImagePipeline,","                  imageTask: ImageTask,","                  didReceiveEvent event: ImageTaskEvent) {","        switch event {","        case .started:","            startedTaskCount += 1","        case .cancelled:","            cancelledTaskCount += 1","        case .completed(let result):","            completedTaskCount += 1","        default:","            break","        }","        events.append(event)","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can pass the delegate when instantiating the pipeline. The delegate is strongly retained."}]},{"type":"codeListing","syntax":"swift","code":["let observer = ImagePipelineObserver()","ImagePipeline(delegate: observer)"]}]}],"variants":[{"paths":["\/documentation\/nuke\/configuration"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/configuration","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Nuke virtually unlimited possibilities for customization and most of them are done using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct"},{"type":"text","text":"."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Configuration","role":"article","modules":[{"name":"Nuke"}]},"hierarchy":{"paths":[["doc:\/\/com.github.kean.Nuke\/documentation\/Nuke"]]},"documentVersion":0,"references":{"doc://com.github.kean.Nuke/documentation/Nuke/DataLoading":{"role":"symbol","title":"DataLoading","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"DataLoading"}],"abstract":[{"type":"text","text":"Fetches original image data."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/DataLoading","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DataLoading"}],"url":"\/documentation\/nuke\/dataloading"},"doc://com.github.kean.Nuke/documentation/Nuke/image-pipeline-guide":{"role":"article","title":"Image Pipeline Guide","abstract":[{"type":"text","text":"This guide describes in detail what happens under the hood when you call "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/loadImage(with:options:into:progress:completion:)"},{"type":"text","text":" method."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/image-pipeline-guide","kind":"article","type":"topic","url":"\/documentation\/nuke\/image-pipeline-guide"},"doc://com.github.kean.Nuke/documentation/Nuke/ImagePipeline/Configuration-swift.struct":{"role":"symbol","title":"ImagePipeline.Configuration","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Configuration"}],"abstract":[{"type":"text","text":"The pipeline configuration."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Configuration"}],"url":"\/documentation\/nuke\/imagepipeline\/configuration-swift.struct"},"doc://com.github.kean.Nuke/documentation/Nuke/ImageEncoding":{"role":"symbol","title":"ImageEncoding","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ImageEncoding"}],"abstract":[{"type":"text","text":"An image encoder."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImageEncoding","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ImageEncoding"}],"url":"\/documentation\/nuke\/imageencoding"},"doc://com.github.kean.Nuke/documentation/Nuke/ImagePipeline/Configuration-swift.struct/withURLCache":{"role":"symbol","title":"withURLCache","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"withURLCache"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ImagePipeline","preciseIdentifier":"s:4Nuke13ImagePipelineC"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Configuration","preciseIdentifier":"s:4Nuke13ImagePipelineC13ConfigurationV"}],"abstract":[{"type":"text","text":"A configuration with a "},{"type":"codeVoice","code":"DataLoader"},{"type":"text","text":" with an HTTP disk cache ("},{"type":"codeVoice","code":"URLCache"},{"type":"text","text":")"},{"type":"text","text":" "},{"type":"text","text":"with a size limit of 150 MB."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/withURLCache","kind":"symbol","type":"topic","url":"\/documentation\/nuke\/imagepipeline\/configuration-swift.struct\/withurlcache"},"doc://com.github.kean.Nuke/documentation/Nuke/prefetching":{"role":"article","title":"Prefetching","abstract":[{"type":"text","text":"Loading data ahead of time in anticipation of its use (prefetching) is a great way to improve user experience. It’s especially effective for images; it can give users an impression that there is no networking and the images are just magically always there."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/prefetching","kind":"article","type":"topic","url":"\/documentation\/nuke\/prefetching"},"doc://com.github.kean.Nuke/documentation/Nuke/ImageDecoding":{"role":"symbol","title":"ImageDecoding","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ImageDecoding"}],"abstract":[{"type":"text","text":"An image decoder."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImageDecoding","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ImageDecoding"}],"url":"\/documentation\/nuke\/imagedecoding"},"doc://com.github.kean.Nuke/documentation/Nuke/DataCaching":{"role":"symbol","title":"DataCaching","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"DataCaching"}],"abstract":[{"type":"text","text":"Data cache."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/DataCaching","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DataCaching"}],"url":"\/documentation\/nuke\/datacaching"},"doc://com.github.kean.Nuke/documentation/Nuke/ImagePipelineDelegate":{"role":"symbol","title":"ImagePipelineDelegate","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ImagePipelineDelegate"}],"abstract":[{"type":"text","text":"A delegate that allows you to customize the pipleine on a per-request basis."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipelineDelegate","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ImagePipelineDelegate"}],"url":"\/documentation\/nuke\/imagepipelinedelegate"},"https://github.com/kean/Nuke/releases/tag/10.0.0":{"title":"Nuke 10","titleInlineContent":[{"type":"text","text":"Nuke 10"}],"type":"link","identifier":"https:\/\/github.com\/kean\/Nuke\/releases\/tag\/10.0.0","url":"https:\/\/github.com\/kean\/Nuke\/releases\/tag\/10.0.0"},"doc://com.github.kean.Nuke/documentation/Nuke/ImageProcessing":{"role":"symbol","title":"ImageProcessing","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ImageProcessing"}],"abstract":[{"type":"text","text":"Performs image processing."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImageProcessing","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ImageProcessing"}],"url":"\/documentation\/nuke\/imageprocessing"},"doc://com.github.kean.Nuke/documentation/Nuke/caching":{"role":"article","title":"Caching","abstract":[{"type":"text","text":"Nuke has three cache layers that you can configure to precisely match your app needs. The pipeline uses these caches when you request an image. Your app has advanced control over how images are stored and retrieved and direct access to all cache layers."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/caching","kind":"article","type":"topic","url":"\/documentation\/nuke\/caching"},"doc://com.github.kean.Nuke/documentation/Nuke/ImageCaching":{"role":"symbol","title":"ImageCaching","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ImageCaching"}],"abstract":[{"type":"text","text":"In-memory image cache."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImageCaching","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ImageCaching"}],"url":"\/documentation\/nuke\/imagecaching"},"doc://com.github.kean.Nuke/documentation/Nuke/combine":{"role":"article","title":"Combine","abstract":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePublisher"},{"type":"text","text":" starts a new "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImageTask"},{"type":"text","text":" when a subscriber is added and delivers the results to the subscriber. If the requested image is available in the memory cache, the value is delivered immediately. When the subscription is canceled, the task also gets canceled."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/combine","kind":"article","type":"topic","url":"\/documentation\/nuke\/combine"},"doc://com.github.kean.Nuke/documentation/Nuke/ImagePipeline/Configuration-swift.struct/withDataCache":{"role":"symbol","title":"withDataCache","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"withDataCache"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ImagePipeline","preciseIdentifier":"s:4Nuke13ImagePipelineC"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Configuration","preciseIdentifier":"s:4Nuke13ImagePipelineC13ConfigurationV"}],"abstract":[{"type":"text","text":"A configuration with an aggressive disk cache ("},{"type":"codeVoice","code":"DataCache"},{"type":"text","text":") with a"},{"type":"text","text":" "},{"type":"text","text":"size limit of 150 MB. An HTTP cache ("},{"type":"codeVoice","code":"URLCache"},{"type":"text","text":") is disabled."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/withDataCache","kind":"symbol","type":"topic","url":"\/documentation\/nuke\/imagepipeline\/configuration-swift.struct\/withdatacache"},"doc://com.github.kean.Nuke/documentation/Nuke/ImagePipeline/init(configuration:delegate:)":{"role":"symbol","title":"init(configuration:delegate:)","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"configuration"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ImagePipeline","preciseIdentifier":"s:4Nuke13ImagePipelineC"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Configuration","preciseIdentifier":"s:4Nuke13ImagePipelineC13ConfigurationV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"delegate"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ImagePipelineDelegate","preciseIdentifier":"s:4Nuke21ImagePipelineDelegateP"},{"kind":"text","text":"?)"}],"abstract":[{"type":"text","text":"Initializes "},{"type":"codeVoice","code":"ImagePipeline"},{"type":"text","text":" instance with the given configuration."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/init(configuration:delegate:)","kind":"symbol","type":"topic","url":"\/documentation\/nuke\/imagepipeline\/init(configuration:delegate:)"},"doc://com.github.kean.Nuke/documentation/Nuke/plugins":{"role":"article","title":"Plugins","abstract":[{"type":"text","text":"The image pipeline is easy to customize and extend. Check out the following first-class extensions and packages built by the community."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/plugins","kind":"article","type":"topic","url":"\/documentation\/nuke\/plugins"},"doc://com.github.kean.Nuke/documentation/Nuke":{"role":"collection","title":"Nuke","abstract":[{"type":"text","text":"Welcome to the documentation for Nuke, an image loading system for Apple platforms."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke","kind":"symbol","type":"topic","url":"\/documentation\/nuke"}}}