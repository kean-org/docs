{"seeAlsoSections":[{"title":"Guides","identifiers":["doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/image-pipeline-guide","doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/image-formats-guide"],"generated":true}],"schemaVersion":{"major":0,"minor":1,"patch":0},"sections":[],"primaryContentSections":[{"kind":"content","content":[{"anchor":"Caching","level":2,"type":"heading","text":"Caching"},{"anchor":"Enable-Aggressive-Cache","level":3,"type":"heading","text":"Enable Aggressive Cache"},{"type":"paragraph","inlineContent":[{"type":"text","text":"By default, Nuke uses the native HTTP cache, but it’s relatively slow and is subject to the same maximum concurrent operations count as network tasks (because it’s part of the URL loading system). If your app doesn’t take advantage of complex HTTP cache-control parameters, consider enabling the custom aggressive disk cache."}]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The default behavior will most likely change in Nuke 10."}]}]},{"anchor":"Store-Processed-Images","level":3,"type":"heading","text":"Store Processed Images"},{"type":"paragraph","inlineContent":[{"type":"text","text":"By default, the aggressive disk cache (if enabled) stores original image data. If your app applies expensive processors or downsamples images, consider storing processed images instead by setting "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/dataCacheOptions-swift.property"},{"type":"text","text":" to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/DataCachePolicy-swift.enum\/automatic"},{"type":"text","text":" or "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/DataCachePolicy-swift.enum\/storeEncodedImages"},{"type":"text","text":" depending on the use case."}]},{"anchor":"Use-HEIF","level":3,"type":"heading","text":"Use HEIF"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To save disk space see "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImageEncoders\/ImageIO"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImageEncoders\/Default\/isHEIFPreferred"},{"type":"text","text":" option for HEIF support. By default, disabled."}]},{"anchor":"Downsample-Images","level":2,"type":"heading","text":"Downsample Images"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Ideally, the app should download the images optimized for the target device screen size; but it’s not always feasible. To reduce the memory usage, downsample the images."}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Target size is in points.","let request = ImageRequest(","    url: URL(string: \"http:\/\/...\"),","    processors: [ImageProcessors.Resize(size: imageView.bounds.size)]",")"]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Tips: See "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2018\/219"},{"type":"text","text":" to learn more about image decoding and downsampling."}]}]},{"anchor":"Prefetch-Images","level":2,"type":"heading","text":"Prefetch Images"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Loading data ahead of time in anticipation of its use ("},{"type":"reference","isActive":true,"identifier":"https:\/\/en.wikipedia.org\/wiki\/Prefetching"},{"type":"text","text":") is a great way to improve user experience. It’s especially effective for images; it can give users an impression that there is no networking and the images are just magically always there."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To implement prefetching, see "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/prefetching"}]},{"anchor":"Resumable-Downloads","level":2,"type":"heading","text":"Resumable Downloads"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Make sure your server supports resumable downloads. By default, the pipeline enables resumable downloads on the client side."}]},{"anchor":"Request-Priorities","level":2,"type":"heading","text":"Request Priorities"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Nuke allows you to set the request priority and update it for outstanding tasks. It uses priorities for prefetching: the requests created by the prefetcher all have "},{"type":"codeVoice","code":".low"},{"type":"text","text":" priority to make sure they don’t interfere with the “regular” requests. See "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/prefetching"},{"type":"text","text":" to learn more."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"There are many other creative ways to use priorities. For example, when the user taps an image in a grid to open it full screen, you can lower the priority of the requests for the images that are not visible on the screen."}]},{"type":"codeListing","syntax":"swift","code":["final class ImageView: UIView {","    private let task: ImageTask?","","    override func willMove(toWindow newWindow: UIWindow?) {","        super.willMove(toWindow: newWindow)","","        task?.priority = newWindow == nil ? .low : .high","    }","}"]},{"anchor":"Create-URLs-Beforehand","level":2,"type":"heading","text":"Create URLs Beforehand"},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"URL"},{"type":"text","text":" initializer is relatively expensive because it needs to parse the input string. It might take more time than the call to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/loadImage(with:options:into:completion:)"},{"type":"text","text":" itself. Make sure to create the "},{"type":"codeVoice","code":"URL"},{"type":"text","text":" objects in the background."}]},{"anchor":"Auto-Retry","level":2,"type":"heading","text":"Auto Retry"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Enable "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/urlsessionconfiguration\/2908812-waitsforconnectivity"},{"type":"text","text":" on "},{"type":"codeVoice","code":"URLSession"},{"type":"text","text":" to indicate that the session should wait for connectivity to become available instead of failing the request immediately in case of a network failure."}]},{"anchor":"Measure","level":2,"type":"heading","text":"Measure"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you want to see how the system behaves, how long each operation takes, and how many are performed in parallel, enable the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/isSignpostLoggingEnabled"},{"type":"text","text":" option and use the "},{"type":"codeVoice","code":"os_signpost"},{"type":"text","text":" Instrument. For more information see "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/os\/logging"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2018\/405\/"},{"type":"text","text":"."}]}]}],"variants":[{"paths":["\/documentation\/nuke\/performance"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/performance","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Nuke is highly "},{"type":"reference","isActive":true,"identifier":"https:\/\/kean.blog\/post\/concurrency"},{"type":"text","text":" and provides many performance "},{"type":"reference","isActive":true,"identifier":"https:\/\/kean.blog\/post\/nuke-9"},{"type":"text","text":", but it’s ultimately up to your app to decide how to use them."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Performance Guide","role":"article","modules":[{"name":"Nuke"}]},"hierarchy":{"paths":[["doc:\/\/com.github.kean.Nuke\/documentation\/Nuke"]]},"documentVersion":0,"references":{"doc://com.github.kean.Nuke/documentation/Nuke/ImagePipeline/Configuration-swift.struct/DataCachePolicy-swift.enum/automatic":{"role":"symbol","title":"ImagePipeline.Configuration.DataCachePolicy.automatic","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"automatic"}],"abstract":[{"type":"text","text":"For requests with processors, encode and store processed images."},{"type":"text","text":" "},{"type":"text","text":"For requests with no processors, store original image data, unless"},{"type":"text","text":" "},{"type":"text","text":"the resource is local (file:\/\/ or data:\/\/ scheme is used)."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/DataCachePolicy-swift.enum\/automatic","kind":"symbol","type":"topic","url":"\/documentation\/nuke\/imagepipeline\/configuration-swift.struct\/datacachepolicy-swift.enum\/automatic"},"https://developer.apple.com/videos/play/wwdc2018/405/":{"title":"WWDC 2018: Measuring Performance Using Logging","titleInlineContent":[{"type":"text","text":"WWDC 2018: Measuring Performance Using Logging"}],"type":"link","identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2018\/405\/","url":"https:\/\/developer.apple.com\/videos\/play\/wwdc2018\/405\/"},"doc://com.github.kean.Nuke/documentation/Nuke/image-pipeline-guide":{"role":"article","title":"Image Pipeline Guide","abstract":[{"type":"text","text":"This guide describes in detail what happens under the hood when you call "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/loadImage(with:options:into:progress:completion:)"},{"type":"text","text":" method."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/image-pipeline-guide","kind":"article","type":"topic","url":"\/documentation\/nuke\/image-pipeline-guide"},"doc://com.github.kean.Nuke/documentation/Nuke/prefetching":{"role":"article","title":"Prefetching","abstract":[{"type":"text","text":"Loading data ahead of time in anticipation of its use (prefetching) is a great way to improve user experience. It’s especially effective for images; it can give users an impression that there is no networking and the images are just magically always there."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/prefetching","kind":"article","type":"topic","url":"\/documentation\/nuke\/prefetching"},"doc://com.github.kean.Nuke/documentation/Nuke/ImagePipeline/Configuration-swift.struct/dataCacheOptions-swift.property":{"role":"symbol","title":"dataCacheOptions","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"dataCacheOptions"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ImagePipeline","preciseIdentifier":"s:4Nuke13ImagePipelineC"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Configuration","preciseIdentifier":"s:4Nuke13ImagePipelineC13ConfigurationV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"DataCacheOptions","preciseIdentifier":"s:4Nuke13ImagePipelineC13ConfigurationV16DataCacheOptionsV"}],"abstract":[],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/dataCacheOptions-swift.property","kind":"symbol","type":"topic","deprecated":true,"url":"\/documentation\/nuke\/imagepipeline\/configuration-swift.struct\/datacacheoptions-swift.property"},"doc://com.github.kean.Nuke/documentation/Nuke/image-formats-guide":{"role":"article","title":"Image Formats","abstract":[{"type":"text","text":"Nuke has built-in support for basic image formats like "},{"type":"codeVoice","code":"jpeg"},{"type":"text","text":", "},{"type":"codeVoice","code":"png"},{"type":"text","text":", and "},{"type":"codeVoice","code":"heif"},{"type":"text","text":". It also has the infrastructure for supporting a variety of custom image formats."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/image-formats-guide","kind":"article","type":"topic","url":"\/documentation\/nuke\/image-formats-guide"},"https://developer.apple.com/documentation/os/logging":{"title":"Apple Documentation: Logging","titleInlineContent":[{"type":"text","text":"Apple Documentation: Logging"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/os\/logging","url":"https:\/\/developer.apple.com\/documentation\/os\/logging"},"https://developer.apple.com/documentation/foundation/urlsessionconfiguration/2908812-waitsforconnectivity":{"title":"waitsForConnectivity","titleInlineContent":[{"type":"codeVoice","code":"waitsForConnectivity"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/urlsessionconfiguration\/2908812-waitsforconnectivity","url":"https:\/\/developer.apple.com\/documentation\/foundation\/urlsessionconfiguration\/2908812-waitsforconnectivity"},"https://en.wikipedia.org/wiki/Prefetching":{"title":"prefetching","titleInlineContent":[{"type":"text","text":"prefetching"}],"type":"link","identifier":"https:\/\/en.wikipedia.org\/wiki\/Prefetching","url":"https:\/\/en.wikipedia.org\/wiki\/Prefetching"},"doc://com.github.kean.Nuke/documentation/Nuke":{"role":"collection","title":"Nuke","abstract":[{"type":"text","text":"Welcome to the documentation for Nuke, an image loading system for Apple platforms."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke","kind":"symbol","type":"topic","url":"\/documentation\/nuke"},"doc://com.github.kean.Nuke/documentation/Nuke/ImageEncoders/Default/isHEIFPreferred":{"role":"symbol","title":"isHEIFPreferred","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"isHEIFPreferred"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Set to "},{"type":"codeVoice","code":"true"},{"type":"text","text":" to switch to HEIF when it is available on the current hardware."},{"type":"text","text":" "},{"type":"codeVoice","code":"false"},{"type":"text","text":" by default."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImageEncoders\/Default\/isHEIFPreferred","kind":"symbol","type":"topic","url":"\/documentation\/nuke\/imageencoders\/default\/isheifpreferred"},"doc://com.github.kean.Nuke/documentation/Nuke/ImageEncoders/ImageIO":{"role":"symbol","title":"ImageEncoders.ImageIO","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ImageIO"}],"abstract":[{"type":"text","text":"An Image I\/O based encoder."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImageEncoders\/ImageIO","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ImageIO"}],"url":"\/documentation\/nuke\/imageencoders\/imageio"},"https://developer.apple.com/videos/play/wwdc2018/219":{"title":"Image and Graphics Best Practices","titleInlineContent":[{"type":"text","text":"Image and Graphics Best Practices"}],"type":"link","identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2018\/219","url":"https:\/\/developer.apple.com\/videos\/play\/wwdc2018\/219"},"doc://com.github.kean.Nuke/documentation/Nuke/ImagePipeline/Configuration-swift.struct/DataCachePolicy-swift.enum/storeEncodedImages":{"role":"symbol","title":"ImagePipeline.Configuration.DataCachePolicy.storeEncodedImages","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"storeEncodedImages"}],"abstract":[{"type":"text","text":"For all requests, encode and store decoded images after all"},{"type":"text","text":" "},{"type":"text","text":"processors are applied."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/DataCachePolicy-swift.enum\/storeEncodedImages","kind":"symbol","type":"topic","url":"\/documentation\/nuke\/imagepipeline\/configuration-swift.struct\/datacachepolicy-swift.enum\/storeencodedimages"},"doc://com.github.kean.Nuke/documentation/Nuke/loadImage(with:options:into:completion:)":{"role":"symbol","title":"loadImage(with:options:into:completion:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"loadImage"},{"kind":"text","text":"("},{"kind":"externalParam","text":"with"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ImageRequestConvertible","preciseIdentifier":"s:4Nuke23ImageRequestConvertibleP"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"options"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ImageLoadingOptions","preciseIdentifier":"s:4Nuke19ImageLoadingOptionsV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"into"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ImageDisplayingView","preciseIdentifier":"s:4Nuke19ImageDisplayingViewa"},{"kind":"text","text":", "},{"kind":"externalParam","text":"completion"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"Result","preciseIdentifier":"s:s6ResultO"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"ImageResponse","preciseIdentifier":"s:4Nuke13ImageResponseV"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"ImagePipeline","preciseIdentifier":"s:4Nuke13ImagePipelineC"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Error","preciseIdentifier":"s:4Nuke13ImagePipelineC5ErrorO"},{"kind":"text","text":">) -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"ImageTask","preciseIdentifier":"s:4Nuke9ImageTaskC"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Loads an image with the given request and displays it in the view."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/loadImage(with:options:into:completion:)","kind":"symbol","type":"topic","url":"\/documentation\/nuke\/loadimage(with:options:into:completion:)"},"doc://com.github.kean.Nuke/documentation/Nuke/ImagePipeline/Configuration-swift.struct/isSignpostLoggingEnabled":{"role":"symbol","title":"isSignpostLoggingEnabled","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"isSignpostLoggingEnabled"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"codeVoice","code":"false"},{"type":"text","text":" by default. If "},{"type":"codeVoice","code":"true"},{"type":"text","text":", enables "},{"type":"codeVoice","code":"os_signpost"},{"type":"text","text":" logging for"},{"type":"text","text":" "},{"type":"text","text":"measuring performance. You can visually see all the performance"},{"type":"text","text":" "},{"type":"text","text":"metrics in "},{"type":"codeVoice","code":"os_signpost"},{"type":"text","text":" Instrument. For more information see"},{"type":"text","text":" "},{"type":"text","text":"https:\/\/developer.apple.com\/documentation\/os\/logging and"},{"type":"text","text":" "},{"type":"text","text":"https:\/\/developer.apple.com\/videos\/play\/wwdc2018\/405\/."}],"identifier":"doc:\/\/com.github.kean.Nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/isSignpostLoggingEnabled","kind":"symbol","type":"topic","url":"\/documentation\/nuke\/imagepipeline\/configuration-swift.struct\/issignpostloggingenabled"}}}